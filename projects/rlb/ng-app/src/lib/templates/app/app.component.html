<div class="rlb-app">
  <rlb-sidebar class="rlb-sidebar" *ngIf="(sidebarVisible$ | async)">
    <rlb-sidebar-item *ngFor="let item of  (sidebarItems$ | async)" [icon]="item.icon" [link]="item.url"
      [title]="item.title" [label]="item.label">{{item.label}}
      <rlb-sidebar-item *ngFor="let sitem of item.items || []" [icon]="sitem.icon" [link]="sitem.url"
        [title]="sitem.title" [label]="sitem.label">{{sitem.label}}
      </rlb-sidebar-item>
    </rlb-sidebar-item>
  </rlb-sidebar>
  <ng-container *ngIf="navVisible$ | async">
    <rlb-navbar expand="lg" *ngIf="navVisible$ | async" class="border-bottom py-1 rlb-navbar">
      <a *ngIf="sidebarVisible$ | async" class="d-block d-sm-none" rlb-button href="#" toggle="collapse"
        toggle-target="sidebar" [outline]="true">
        <span class="navbar-toggler-icon"></span>
      </a>
      <a *ngIf="navHeader$ | async" rlb-navbar-brand href="#">{{ navHeader$ | async }}</a>
      <rlb-navbar-form *ngIf="navSearchVisible$ | async">
        <rlb-input-group class="my-1 ms-3" validate>
          <rlb-input type="search" class="search-input" placeholder="Search" [(ngModel)]="navSearchText"
            (keyup.enter)="setNavbarSearchText(navSearchText)" name="search" size="small">
            <button after rlb-button outline type="submit" (click)="setNavbarSearchText(navSearchText)" size="sm">
              <i class="bi bi-search"></i>
            </button>
          </rlb-input>
        </rlb-input-group>
      </rlb-navbar-form>
      <rlb-navbar-items>
        <ng-container ngProjectAs="rlb-navbar-item" *ngFor="let navComponent of navLeftItems$ | async">
          <ng-container *ngComponentOutlet="navComponent | leftComponent"></ng-container>
        </ng-container>
      </rlb-navbar-items>
      <rlb-navbar-items class="ms-auto">
        <ng-container ngProjectAs="rlb-navbar-item" *ngFor="let navComponent of navRightItems$ | async">
          <ng-container *ngComponentOutlet="navComponent | rightComponent"></ng-container>
        </ng-container>
        <rlb-navbar-separator />
        <rlb-navbar-item *ngIf="(navbarHasLogin$ | async) && !(isAuth$ | async)" (click)="loginNav($event)">
          <span tooltip-placement="bottom" [tooltip]="('core.account.login') |translate">
            <i class=" bi bi-box-arrow-in-left"></i>
          </span>
        </rlb-navbar-item>
        <rlb-navbar-item *ngIf=" (navbarHasLogin$ | async) && (isAuth$ | async)" href="/profile">
          <span tooltip-placement="bottom" [tooltip]="('core.account.title') |translate">
            <i class="bi bi-person"></i>
          </span>
        </rlb-navbar-item>
        <rlb-navbar-item *ngIf="navbarHasSettings$ | async" href="/setting">
          <span tooltip-placement="bottom" [tooltip]="('core.settings.title') |translate">
            <i class="bi bi-gear"></i>
          </span>
        </rlb-navbar-item>
        <rlb-navbar-item *ngIf="(navbarHasApps$ | async) && apps.length > 1" href="/apps">
          <span tooltip-placement="bottom" [tooltip]="('core.apps.button') |translate">
            <i class="bi bi-grid-3x3-gap-fill"></i>
          </span>
        </rlb-navbar-item>
      </rlb-navbar-items>
    </rlb-navbar>
  </ng-container>
  <div class="rlb-content" [class.rlb-sidebar-en]="(sidebarVisible$ | async)">
    <ng-content></ng-content>
  </div>
</div>

<ng-container *ngIf="modalContainerId">
  <rlb-modal-container [id]="modalContainerId" />
</ng-container>

<ng-container *ngIf="toastContainerIds">
  <ng-container *ngIf="toastContainerIds.constructor.name === 'Array'; else toastContainerIdsIsNotArray">
    <rlb-toast-container *ngFor="let toastContainerId of toastContainerIds | asMulti" [id]="toastContainerId" />
  </ng-container>
  <ng-template #toastContainerIdsIsNotArray>
    <rlb-toast-container class="position-fixed bottom-0 end-0 p-3" [id]="toastContainerIds | asSingle" />
  </ng-template>
</ng-container>