<div class="rlb-app">
  <ng-container *ngIf="sidearVisible$ | async">
    <rlb-sidebar id="sidebar" *ngIf="env.sidebarMode !== 'none'">
      <rlb-sidebar-header *ngIf="env.sidebarMode ==='logo'" mode="logo"
        [data]="{ image:env.appLogo, text:env.appTitle }" />
      <rlb-sidebar-header *ngIf="env.sidebarMode ==='user'" mode="user" />
      <rlb-sidebar-item *ngFor="let sideItem of sidebarItems" [icon]="sideItem.icon">
        {{sideItem.label}}
      </rlb-sidebar-item>
      <rlb-sidebar-footer>
        <rlb-sidebar-item *ngFor="let sideItem of sidebarFooterItems" [icon]="sideItem.icon">
          {{sideItem.label}}
        </rlb-sidebar-item>
        <rlb-sidebar-item (action)="modalAppDialog()" icon="bi bi-grid-3x3-gap-fill">
          {{'core.apps' | translate}}
        </rlb-sidebar-item>
        <rlb-sidebar-item *ngIf="env.sidebarMode !== 'user' && (sidearHasLogin$ | async)" icon="bi bi-person">
          {{'core.user' | translate}}
        </rlb-sidebar-item>
        <rlb-sidebar-item icon="bi bi-gear">
          {{'core.settings' | translate}}
        </rlb-sidebar-item>
      </rlb-sidebar-footer>
    </rlb-sidebar>
  </ng-container>
  <div class="rlb-right-panel">
    <ng-container *ngIf="navVisible$ | async">
      <rlb-navbar color="light" expand="lg" *ngIf="env.navbarDisabled !== true">
        <a *ngIf="sidearVisible$ | async" class="d-block d-sm-none" rlb-button href="#" toggle="collapse"
          toggle-target="sidebar" [outline]="true">
          <span class="navbar-toggler-icon"></span>
        </a>
        <a *ngIf="navHeader$ | async" rlb-navbar-brand href="#">{{ navHeader$ | async }}</a>
        <rlb-navbar-form *ngIf="navSearchVisible$ | async">
          <rlb-input class="mx-2" type="search" placeholder="Search" />
          <button class="me-2" rlb-button type="submit" icon="bi bi-search">Search</button>
        </rlb-navbar-form>
        <rlb-navbar-items class="ms-auto">
          <a *ngFor="let navItem of navbarItems" rlb-navbar-item [routerLink]="navItem.url" routerLinkActive="active">
            {{navItem.label}}
          </a>
          <a *ngIf="navLoginVisible$|async" rlb-navbar-item dropdown toggle="dropdown" toggle-target="#">
            <i class="bi bi-person"></i>
            <ul rlb-dropdown-menu placement="right">
              <li rlb-dropdown-item href="#">{{'core.login' | translate}}</li>
              <li rlb-dropdown-item href="#">{{'core.logout' | translate}}</li>
            </ul>
          </a>
          <a *ngIf="navSettingsVisible$ | async" rlb-navbar-item href="#">
            <i class="bi bi-gear"></i>
          </a>
        </rlb-navbar-items>
      </rlb-navbar>
    </ng-container>
    <div class="rlb-content">
      <ng-content></ng-content>
    </div>
  </div>
</div>

<ng-container *ngIf="modalContainerId">
  <rlb-modal-container [id]="modalContainerId" />
</ng-container>

<ng-container *ngIf="toastContainerIds">
  <ng-container *ngIf="toastContainerIds.constructor.name === 'Array'; else toastContainerIdsIsNotArray">
    <rlb-toast-container *ngFor="let toastContainerId of toastContainerIds | asMulti" [id]="toastContainerId" />
  </ng-container>
  <ng-template #toastContainerIdsIsNotArray>
    <rlb-toast-container class="position-fixed bottom-0 end-0 p-3" [id]="toastContainerIds | asSingle" />
  </ng-template>
</ng-container>